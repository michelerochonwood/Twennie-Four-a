<div class="badges-container">
  <h1>Badge Selection</h1>
  <!-- Left Sidebar: Tab Column -->
  <div class="tabs-column">
    <div class="tab-wrapper">
      <div class="tab active" data-target="basic">
        <span class="tab-label">basic</span>
      </div>
    </div>
    <div class="tab-wrapper">
      <div class="tab" data-target="business_development">
        <span class="tab-label">business development</span>
      </div>
    </div>
    <div class="tab-wrapper">
      <div class="tab" data-target="communication">
        <span class="tab-label">communication</span>
      </div>
    </div>
    <div class="tab-wrapper">
      <div class="tab" data-target="creativity">
        <span class="tab-label">creativity</span>
      </div>
    </div>
    <div class="tab-wrapper">
      <div class="tab" data-target="creepy">
        <span class="tab-label">creepy</span>
      </div>
    </div>
    <div class="tab-wrapper">
      <div class="tab" data-target="fun_and_play">
        <span class="tab-label">fun and play</span>
      </div>
    </div>
    <div class="tab-wrapper">
      <div class="tab" data-target="information_management">
        <span class="tab-label">information management</span>
      </div>
    </div>
    <div class="tab-wrapper">
      <div class="tab" data-target="leadership">
        <span class="tab-label">leadership</span>
      </div>
    </div>
    <div class="tab-wrapper">
      <div class="tab" data-target="people_management">
        <span class="tab-label">people management</span>
      </div>
    </div>
    <div class="tab-wrapper">
      <div class="tab" data-target="project_management">
        <span class="tab-label">project management</span>
      </div>
    </div>
    <div class="tab-wrapper">
      <div class="tab" data-target="proposal_management">
        <span class="tab-label">proposal management</span>
      </div>
    </div>
    <div class="tab-wrapper">
      <div class="tab" data-target="proposal_strat">
        <span class="tab-label">proposal strategy</span>
      </div>
    </div>
    <div class="tab-wrapper">
      <div class="tab" data-target="strategy">
        <span class="tab-label">strategy</span>
      </div>
    </div>
    <div class="tab-wrapper">
      <div class="tab" data-target="teambuilding">
        <span class="tab-label">team building</span>
      </div>
    </div>
    <div class="tab-wrapper">
      <div class="tab" data-target="vacay">
        <span class="tab-label">vacay</span>
      </div>
    </div>
    <div class="tab-wrapper">
      <div class="tab" data-target="wildambitions">
        <span class="tab-label">wild ambitions</span>
      </div>
    </div>
    <div class="tab-wrapper">
      <div class="tab" data-target="yummy">
        <span class="tab-label">yummy</span>
      </div>
    </div>
  </div>
  
  <!-- Main Content: Badge Grid Area -->
  <div class="badge-content">
    <div class="badges-tab-content" id="basic">
      {{> badgepartials/basic }}
    </div>
    <div class="badges-tab-content" id="business_development">
      {{> badgepartials/business_development }}
    </div>
    <div class="badges-tab-content" id="communication">
      {{> badgepartials/communication }}
    </div>
    <div class="badges-tab-content" id="creativity">
      {{> badgepartials/creativity }}
    </div>
    <div class="badges-tab-content" id="creepy">
      {{> badgepartials/creepy }}
    </div>
    <div class="badges-tab-content" id="fun_and_play">
      {{> badgepartials/fun_and_play }}
    </div>
    <div class="badges-tab-content" id="information_management">
      {{> badgepartials/information_management }}
    </div>
    <div class="badges-tab-content" id="leadership">
      {{> badgepartials/leadership }}
    </div>
    <div class="badges-tab-content" id="people_management">
      {{> badgepartials/people_management }}
    </div>
    <div class="badges-tab-content" id="project_management">
      {{> badgepartials/project_management }}
    </div>
    <div class="badges-tab-content" id="proposal_management">
      {{> badgepartials/proposal_management }}
    </div>
    <div class="badges-tab-content" id="proposal_strat">
      {{> badgepartials/proposal_strategy }}
    </div>
    <div class="badges-tab-content" id="strategy">
      {{> badgepartials/strategy }}
    </div>
    <div class="badges-tab-content" id="teambuilding">
      {{> badgepartials/teambuilding }}
    </div>
    <div class="badges-tab-content" id="vacay">
      {{> badgepartials/vacay }}
    </div>
    <div class="badges-tab-content" id="wildambitions">
      {{> badgepartials/wildambitions }}
    </div>
    <div class="badges-tab-content" id="yummy">
      {{> badgepartials/yummy }}
    </div>
  </div>
</div>



<script>
  document.addEventListener('DOMContentLoaded', function() {
    const buttons = document.querySelectorAll('.badge-pick-btn');

    buttons.forEach(button => {
      button.addEventListener('click', async function() {
        const badgePath = this.getAttribute('data-badge-path');
        const badgeName = this.getAttribute('data-badge-name');

        try {
          const response = await fetch('/badges/pick', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({ badgePath, badgeName })
          });

          const result = await response.json();
          if (result.success) {
            // Redirect back to prompt set form
            window.location.href = '/unitform/form_promptset';
          } else {
            alert('There was a problem picking the badge.');
          }
        } catch (error) {
          console.error('Error picking badge:', error);
          alert('Error picking badge.');
        }
      });
    });
  });
</script>
