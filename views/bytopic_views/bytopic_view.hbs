{{#*inline "title"}}Search by Topic | Twennie{{/inline}}

<div class="bytopic-container">
  <div class="bytopic-content">
    <h1 class="bytopic-title">{{title}}</h1>
    <p class="bytopic-short-summary">{{shortSummary}}</p>
    <p class="bytopic-long-summary">{{longSummary}}</p>

    <div class="bytopic-library-units-grid">
      {{#each libraryUnits}}
      <div class="bytopic-library-unit-card">
        <!-- SVG Header Container -->
        <div class="bytopic-card-svg-header">
          <svg id="Layer_2" data-name="Layer 2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 198.89 17.83">
            <defs>
              <style>.cls-1 { fill: #4e50a2; }</style>
            </defs>
            <g id="Layer_1-2" data-name="Layer 1">
              <path class="cls-1" d="M0,9.74s30.57,13.88,92.83,1.88c0,0,68.2-13.17,106.06,6.21V0H0v9.74Z"/>
            </g>
          </svg>
        </div>

        <!-- Card Content Container -->
        <div class="bytopic-card-content">

<!-- Duration Image -->
<div class="bytopic-duration-image-container" style="text-align: center;">
  <img 
    src="{{getDurationImage this.type}}" 
    onerror="this.onerror=null; this.src='/images/placeholder.svg'" 
    alt="duration" 
    class="bytopic-duration-image"
  >
  &nbsp;
</div>



          <!-- Unit Type Icon -->
          <div class="bytopic-unit-type-icon-container">
            <img src="{{getUnitTypeIcon this.type}}" alt="Unit Type Icon" class="bytopic-unit-type-icon">
          </div>

          <!-- Unit Title -->
          <div class="bytopic-unit-title-container">
            <h2 class="bytopic-unit-title">{{this.title}}</h2>
          </div>

          <!-- Down Arrow for Expand/Collapse -->
<div class="bytopic-expand-toggle" onclick="toggleCard(this)">
  <svg class="bytopic-arrow-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 331.65 100.99">
    <defs><style>.cls-1 { fill: #4e50a2; }</style></defs>
    <g>
      <polygon class="cls-1" points="0 0 161.57 100.99 331.65 0 0 0"/>
    </g>
  </svg>
</div>

          <!-- Hidden Content (Initially Collapsed) -->
          <div class="bytopic-hidden-content">
            <!-- Author Details -->
            <div class="bytopic-author-label">AUTHOR</div>
            <div class="bytopic-author-image-container">
              <img src="{{authorImage}}" alt="Author Image" class="bytopic-author-image">
            </div>
            <div class="bytopic-author-name-container">
              <span class="bytopic-author-name">{{this.authorName}}</span>
            </div>

            <!-- Full Summary -->
            <div class="bytopic-unit-summary-container">
              <p class="bytopic-unit-long-summary">{{this.full_summary}}</p>
            </div>

            <!-- Purpose -->
            <div class="bytopic-detail-value-purpose">{{this.purpose}}</div>

            <!-- Review This Unit Button -->
            <div class="bytopic-unit-review-container">
              <a href="https://www.twennie.com/unitviews/{{capitalize type}}s/view/{{_id}}" class="bytopic-unit-review-btn">review this unit</a>
            </div>
          </div>
        </div>
      </div>
      {{else}}
      <p>No units available for this topic.</p>
      {{/each}}
    </div>
  </div>
</div>







<script>
function toggleCard(element) {
  let card = element.closest('.bytopic-library-unit-card');
  card.classList.toggle('active');
  let arrow = element;
  arrow.classList.toggle('open');
}
</script>






<script>
  function toggleCard(element) {
  let card = element.closest('.bytopic-library-unit-card');
  card.classList.toggle('active');
  
  let arrow = element.querySelector('.bytopic-arrow-icon');
  arrow.classList.toggle('open');
}
</script>