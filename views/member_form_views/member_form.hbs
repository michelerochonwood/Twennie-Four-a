<form id="member-form" action="/member/form" method="POST" class="membership-form">
  <input type="hidden" name="_csrf" value="{{csrfToken}}">
  <input type="hidden" name="redirectTarget" id="redirectTarget" value="form">

  <div class="individual-form-container">
    <h1 class="form-title">individual membership form</h1>

    <!-- Access Level Selection -->
<div class="form-field-access-level">
  <label for="accessLevel">Choose your membership type</label>
  <select id="accessLevel" name="accessLevel" required onchange="handleAccessLevelChange(this.value)">
    <option value="">Please select an access level</option>
    <option value="free_individual">Free Member</option>
    <option value="contributor_individual">Contributor Member</option>
    <option value="paid_individual">Paid Member</option>
  </select>
</div>

    <!-- Contributor Agreement -->
    <div id="contributor-terms" class="form-field hidden">
      <p><strong>Contributor Agreement</strong></p>
      <ul>
        <li>To maintain a contributor membership, members must submit one library unit per month. All submitted units are subject to the approval of Twennie administrators.</li>
        <li>Instructions for submitting units are available in each submission form.</li>
        <li>If you need further information about submitting library units or the contributor membership option, contact Twennie at <a href="mailto:info@twennie.com">info@twennie.com</a>.</li>
      </ul>
<div class="checkbox-wrapper">
  <input type="checkbox" id="contributorAgreement" name="contributorAgreement" required>
  <label for="contributorAgreement">I have read and understand these conditions.</label>
</div>
    </div>

    <!-- Hidden redirect notice for paid members -->
    <div id="paid-redirect-note" class="form-field hidden">
      <p>You will be redirected to the payment page to complete your membership.</p>
    </div>

    <!-- EXISTING FIELDS -->
    <div class="form-field">
      <label for="name">Full Name</label>
      <input type="text" id="name" name="name" required>
    </div>

    <div class="form-field">
      <label for="professionalTitle">Professional Title</label>
      <input type="text" id="professionalTitle" name="professionalTitle" required>
    </div>

    <div class="form-field">
      <label for="organization">Organization</label>
      <input type="text" id="organization" name="organization" required>
    </div>

    <div class="form-field-industry">
      <label for="industry">Industry</label>
      <select id="industry" name="industry" required>
        <option value="">Please select an industry</option>
        <option value="Engineering">Engineering</option>
        <option value="Architecture">Architecture</option>
        <option value="Project Management">Project Management</option>
        <option value="Information Technology(IT)">Information Technology(IT)</option>
        <option value="Web Design">Web Design</option>
        <option value="Construction">Construction</option>
        <option value="Technology">Technology</option>
        <option value="AI and Robotics">AI and Robotics</option>
        <option value="Social Media/Digital Advertising">Social Media/Digital Advertising</option>
        <option value="Community Planning/Landscape Architecture">Community Planning/Landscape Architecture</option>
        <option value="Land Development">Land Development</option>
        <option value="Telecommunications">Telecommunications</option>
        <option value="E-Commerce">E-Commerce</option>
        <option value="Cybersecurity">Cybersecurity</option>
        <option value="Fintech">Fintech</option>
        <option value="Edtech">Edtech</option>
        <option value="Energy and Utilities">Energy and Utilities</option>
        <option value="Manufacturing">Manufacturing</option>
        <option value="Other">Other</option>
      </select>
    </div>

    <div class="form-field">
      <label for="username">Username</label>
      <input type="text" id="username" name="username" required>
    </div>

    <div class="form-field">
      <label for="email">Email</label>
      <input type="email" id="email" name="email" required>
    </div>

    <div class="form-field">
      <label for="password">Password</label>
      <input type="password" id="password" name="password" required>
    </div>

    <!-- Dropdowns -->
    <div class="form-field-topic">
      <label for="topic1">Select Topic 1</label>
      <select id="topic1" name="topic1" required>
        <option value="">Please select a topic</option>
            <option value="Career Development in Technical Services">Career Development in Technical Services</option>
    <option value="Soft Skills in Technical Environments">Soft Skills in Technical Environments</option>
    <option value="Project Management">Project Management</option>
    <option value="Business Development in Technical Services">Business Development in Technical Services</option>
    <option value="Proposal Management">Proposal Management</option>
    <option value="Proposal Strategy">Proposal Strategy</option>
    <option value="Storytelling in Technical Marketing">Storytelling in Technical Marketing</option>
    <option value="Client Experience">Client Experience</option>
    <option value="Social Media, Advertising, and Other Mysteries">Social Media, Advertising, and Other Mysteries</option>
    <option value="Emotional Intelligence">Emotional Intelligence</option>
    <option value="The Pareto Principle or 80/20">The Pareto Principle or 80/20</option>
    <option value="Diversity and Inclusion in Consulting">Diversity and Inclusion in Consulting</option>
    <option value="People Before Profit">People Before Profit</option>
    <option value="Non-Technical Roles in Technical Environments">Non-Technical Roles in Technical Environments</option>
    <option value="Leadership in Technical Services">Leadership in Technical Services</option>
    <option value="The Advantage of Failure">The Advantage of Failure</option>
    <option value="Social Entrepreneurship">Social Entrepreneurship</option>
    <option value="Employee Experience">Employee Experience</option>
    <option value="Project Management Software">Project Management Software</option>
    <option value="CRM Platforms">CRM Platforms</option>
    <option value="Client Feedback Software">Client Feedback Software</option>
    <option value="Workplace Culture">Workplace Culture</option>
    <option value="Mental Health in Consulting Environments">Mental Health in Consulting Environments</option>
    <option value="Remote and Hybrid Work">Remote and Hybrid Work</option>
    <option value="Four Day Work Week">Four Day Work Week</option>
    <option value="The Power of Play in the Workplace">The Power of Play in the Workplace</option>
    <option value="Team Building in Consulting">Team Building in Consulting</option>
    <option value="AI in Consulting">AI in Consulting</option>
    <option value="AI in Project Management">AI in Project Management</option>
    <option value="AI in Learning">AI in Learning</option>
      </select>
    </div>

    <div class="form-field-topic">
      <label for="topic2">Select Topic 2</label>
      <select id="topic2" name="topic2" required>
        <option value="">Please select a topic</option>
    <option value="Career Development in Technical Services">Career Development in Technical Services</option>
    <option value="Soft Skills in Technical Environments">Soft Skills in Technical Environments</option>
    <option value="Project Management">Project Management</option>
    <option value="Business Development in Technical Services">Business Development in Technical Services</option>
    <option value="Proposal Management">Proposal Management</option>
    <option value="Proposal Strategy">Proposal Strategy</option>
    <option value="Storytelling in Technical Marketing">Storytelling in Technical Marketing</option>
    <option value="Client Experience">Client Experience</option>
    <option value="Social Media, Advertising, and Other Mysteries">Social Media, Advertising, and Other Mysteries</option>
    <option value="Emotional Intelligence">Emotional Intelligence</option>
    <option value="The Pareto Principle or 80/20">The Pareto Principle or 80/20</option>
    <option value="Diversity and Inclusion in Consulting">Diversity and Inclusion in Consulting</option>
    <option value="People Before Profit">People Before Profit</option>
    <option value="Non-Technical Roles in Technical Environments">Non-Technical Roles in Technical Environments</option>
    <option value="Leadership in Technical Services">Leadership in Technical Services</option>
    <option value="The Advantage of Failure">The Advantage of Failure</option>
    <option value="Social Entrepreneurship">Social Entrepreneurship</option>
    <option value="Employee Experience">Employee Experience</option>
    <option value="Project Management Software">Project Management Software</option>
    <option value="CRM Platforms">CRM Platforms</option>
    <option value="Client Feedback Software">Client Feedback Software</option>
    <option value="Workplace Culture">Workplace Culture</option>
    <option value="Mental Health in Consulting Environments">Mental Health in Consulting Environments</option>
    <option value="Remote and Hybrid Work">Remote and Hybrid Work</option>
    <option value="Four Day Work Week">Four Day Work Week</option>
    <option value="The Power of Play in the Workplace">The Power of Play in the Workplace</option>
    <option value="Team Building in Consulting">Team Building in Consulting</option>
    <option value="AI in Consulting">AI in Consulting</option>
    <option value="AI in Project Management">AI in Project Management</option>
    <option value="AI in Learning">AI in Learning</option>
      </select>
    </div>

    <div class="form-field-topic">
      <label for="topic3">Select Topic 3</label>
      <select id="topic3" name="topic3" required>
        <option value="">Please select a topic</option>
    <option value="Career Development in Technical Services">Career Development in Technical Services</option>
    <option value="Soft Skills in Technical Environments">Soft Skills in Technical Environments</option>
    <option value="Project Management">Project Management</option>
    <option value="Business Development in Technical Services">Business Development in Technical Services</option>
    <option value="Proposal Management">Proposal Management</option>
    <option value="Proposal Strategy">Proposal Strategy</option>
    <option value="Storytelling in Technical Marketing">Storytelling in Technical Marketing</option>
    <option value="Client Experience">Client Experience</option>
    <option value="Social Media, Advertising, and Other Mysteries">Social Media, Advertising, and Other Mysteries</option>
    <option value="Emotional Intelligence">Emotional Intelligence</option>
    <option value="The Pareto Principle or 80/20">The Pareto Principle or 80/20</option>
    <option value="Diversity and Inclusion in Consulting">Diversity and Inclusion in Consulting</option>
    <option value="People Before Profit">People Before Profit</option>
    <option value="Non-Technical Roles in Technical Environments">Non-Technical Roles in Technical Environments</option>
    <option value="Leadership in Technical Services">Leadership in Technical Services</option>
    <option value="The Advantage of Failure">The Advantage of Failure</option>
    <option value="Social Entrepreneurship">Social Entrepreneurship</option>
    <option value="Employee Experience">Employee Experience</option>
    <option value="Project Management Software">Project Management Software</option>
    <option value="CRM Platforms">CRM Platforms</option>
    <option value="Client Feedback Software">Client Feedback Software</option>
    <option value="Workplace Culture">Workplace Culture</option>
    <option value="Mental Health in Consulting Environments">Mental Health in Consulting Environments</option>
    <option value="Remote and Hybrid Work">Remote and Hybrid Work</option>
    <option value="Four Day Work Week">Four Day Work Week</option>
    <option value="The Power of Play in the Workplace">The Power of Play in the Workplace</option>
    <option value="Team Building in Consulting">Team Building in Consulting</option>
    <option value="AI in Consulting">AI in Consulting</option>
    <option value="AI in Project Management">AI in Project Management</option>
    <option value="AI in Learning">AI in Learning</option>
      </select>
    </div>

    <!-- Submit -->
    <button type="submit" id="make-member-button" class="make-member-button">
      make me a member
    </button>
  </div>
</form>

<script>
  function handleAccessLevelChange(value) {
    const contributorTerms = document.getElementById('contributor-terms');
    const contributorAgreement = document.getElementById('contributorAgreement');
    const paidNote = document.getElementById('paid-redirect-note');
    const redirectTarget = document.getElementById('redirectTarget');

    // Reset visibility
    contributorTerms.classList.add('hidden');
    paidNote.classList.add('hidden');
    contributorAgreement.required = false;
    redirectTarget.value = 'form'; // default

    if (value === 'contributor_individual') {
      contributorTerms.classList.remove('hidden');
      contributorAgreement.required = true;
      redirectTarget.value = 'form'; // stays on form
    } else if (value === 'paid_individual') {
      paidNote.classList.remove('hidden');
      redirectTarget.value = 'payment'; // request redirect on server
    }
  }
</script>

<style>
  .hidden {
    display: none;
  }
</style>
